@model ICollection<PostViewModel>

@if (User?.IsInRole("Administrator") ?? false)
{
    ViewData["Title"] = "News (Admin)";
    @await Html.PartialAsync(@"~/Views/Shared/_NewsAdminPartial.cshtml", Model);
}
else
{
    ViewData["Title"] = "News";
    @if (Model.Count > 0 && Model.Any(p => p.ImageUrls.Count() <= 0 == false))
    {
        <section>
            <h2 class="text-center">News</h2>
            <div class="container">
                @{
                    int i = 1;

                    <hr />
                    foreach (var post in Model)
                    {
                        <div class="row row-cols-auto mt-5">
                            @if (i % 2 == 1)
                            {
                                <div class="col-12 col-lg-4">
                                    <div class="image ratio ratio-4x3">
                                        <img class="img-fluid rounded" src="@post.ImageUrls[0]" />
                                    </div>
                                </div>
                                <div class="d-flex flex-column col-12 col-lg-8 align-items-center mt-2 mt-lg-0">
                                    <div class="title shadow-sm">
                                        <p class="fw-bold text-center fs-4">@post.Title</p>
                                    </div>
                                    <div class="content">
                                        <p class="lead text-center">
                                            @post.Content.Substring(0, 400)...
                                        </p>
                                    </div>
                                    <div class="align-self-center">
                                        <a asp-controller="News" asp-action="Details" asp-route-postId="@post.Id" class="btn btn-link link-danger">Read More</a>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="d-flex flex-column col-12 col-lg-8 mt-2 mt-lg-0">
                                    <div class="title shadow-sm">
                                        <p class="fw-bold text-center fs-4">@post.Title</p>
                                    </div>
                                    <div class="content">
                                        <p class="lead text-center">
                                            @post.Content.Substring(0, 400)...
                                        </p>
                                    </div>
                                    <div class="align-self-center">
                                        <a asp-controller="News" asp-action="Details" asp-route-postId="@post.Id" class="btn btn-link link-danger">Read More</a>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-4 mt-0">
                                    <div class="image ratio ratio-4x3">
                                        <img class="img-fluid rounded" src="@post.ImageUrls[0]" />
                                    </div>
                                </div>
                            }
                        </div>
                        <hr />
                        i++;
                    }
                }
            </div>
        </section>
    }
    else
    {
        <p>There are no posts!</p>
    }
}
